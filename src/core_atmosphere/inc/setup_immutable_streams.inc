function atm_setup_immutable_streams(manager) result(iErr)

   use MPAS_derived_types, only : MPAS_streamManager_type, &
                                  MPAS_STREAM_INPUT_OUTPUT, MPAS_STREAM_INPUT, &
                                  MPAS_STREAM_OUTPUT, MPAS_STREAM_NONE, MPAS_STREAM_PROPERTY_IMMUTABLE
   use MPAS_stream_manager, only : MPAS_stream_mgr_create_stream, MPAS_stream_mgr_set_property, &
                                   MPAS_stream_mgr_add_field, MPAS_stream_mgr_add_pool
   use mpas_io_units

   implicit none

   type (MPAS_streamManager_type), pointer :: manager
   character (len=StrKIND) :: packages
   integer :: iErr

   iErr = 0

   call MPAS_stream_mgr_create_stream(manager, 'input', MPAS_STREAM_INPUT, 'x1.40962.init.nc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'scalars', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'latCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'lonCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'xCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'yCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'zCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'indexToCellID', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'latEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'lonEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'xEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'yEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'zEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'indexToEdgeID', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'latVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'lonVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'xVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'yVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'zVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'indexToVertexID', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'cellsOnEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'nEdgesOnCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'nEdgesOnEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'edgesOnCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'edgesOnEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'weightsOnEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'dvEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'dcEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'angleEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'areaCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'areaTriangle', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'edgeNormalVectors', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'localVerticalUnitVectors', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'cellTangentPlane', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'cellsOnCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'verticesOnCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'verticesOnEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'edgesOnVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'cellsOnVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'kiteAreasOnVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'fEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'fVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'meshDensity', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'nominalMinDc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'bdyMaskCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'bdyMaskEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'bdyMaskVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'cf1', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'cf2', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'cf3', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'zgrid', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'rdzw', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'dzu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'rdzu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'fzm', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'fzp', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'zxu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'zz', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'zb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'zb3', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'dss', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'u_init', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'v_init', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 't_init', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'qv_init', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'deriv_two', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'defc_a', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'defc_b', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'coeffs_reconstruct', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'initial_time', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'xtime', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'u', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'w', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'rho', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'theta', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'relhum', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'rho_base', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'theta_base', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'surface_pressure', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'isltyp', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'ivgtyp', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'mminlu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'isice_lu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'iswater_lu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'landmask', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'shdmin', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'shdmax', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'snoalb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'albedo12m', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'greenfrac', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'sfc_albbck', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'skintemp', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'snow', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'snowc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'snowh', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'sst', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'tmn', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'vegfra', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'seaice', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'xice', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'xland', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'u10', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'v10', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'q2', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 't2m', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'precipw', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'dzs', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'sh2o', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'smois', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'tslb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'var2d', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'con', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'oa1', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'oa2', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'oa3', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'oa4', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'ol1', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'ol2', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'ol3', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'ol4', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'input', 'h_oml_initial', ierr=ierr)
   call MPAS_stream_mgr_set_property(manager, 'input', MPAS_STREAM_PROPERTY_IMMUTABLE, .true., ierr=ierr)

   call MPAS_stream_mgr_create_stream(manager, 'restart', MPAS_STREAM_INPUT_OUTPUT, 'restart.$Y-$M-$D_$h.$m.$s.nc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'scalars', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'latCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'lonCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'xCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'yCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'zCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'indexToCellID', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'latEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'lonEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'xEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'yEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'zEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'indexToEdgeID', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'latVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'lonVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'xVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'yVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'zVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'indexToVertexID', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cellsOnEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'nEdgesOnCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'nEdgesOnEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'edgesOnCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'edgesOnEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'weightsOnEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'dvEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'dcEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'angleEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'areaCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'areaTriangle', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'edgeNormalVectors', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'localVerticalUnitVectors', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cellTangentPlane', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cellsOnCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'verticesOnCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'verticesOnEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'edgesOnVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cellsOnVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'kiteAreasOnVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'fEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'fVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'meshDensity', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'nominalMinDc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'bdyMaskCell', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'bdyMaskEdge', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'bdyMaskVertex', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cf1', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cf2', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cf3', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'zgrid', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rdzw', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'dzu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rdzu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'fzm', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'fzp', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'zxu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'zz', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'zb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'zb3', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'dss', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'u_init', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'v_init', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 't_init', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'qv_init', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'deriv_two', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'defc_a', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'defc_b', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'coeffs_reconstruct', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'initial_time', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'xtime', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'u', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'w', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rho_zz', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'theta_m', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'pressure_p', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rho', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'theta', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'relhum', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'circulation', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'exner', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'exner_base', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rtheta_base', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'pressure_base', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rho_base', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'theta_base', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ru', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ru_p', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rw', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rw_p', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rtheta_p', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rho_p', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'surface_pressure', ierr=ierr)
   write(packages,'(a)') 'mp_thompson_in'
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rainprod', packages=packages, ierr=ierr)
   write(packages,'(a)') 'mp_thompson_in'
   call MPAS_stream_mgr_add_field(manager, 'restart', 'evapprod', packages=packages, ierr=ierr)
   write(packages,'(a)') 'mp_thompson_in;mp_wsm6_in'
   call MPAS_stream_mgr_add_field(manager, 'restart', 're_cloud', packages=packages, ierr=ierr)
   write(packages,'(a)') 'mp_thompson_in;mp_wsm6_in'
   call MPAS_stream_mgr_add_field(manager, 'restart', 're_ice', packages=packages, ierr=ierr)
   write(packages,'(a)') 'mp_thompson_in;mp_wsm6_in'
   call MPAS_stream_mgr_add_field(manager, 'restart', 're_snow', packages=packages, ierr=ierr)
   write(packages,'(a)') 'mp_thompson_in'
   call MPAS_stream_mgr_add_field(manager, 'restart', 'nt_c', packages=packages, ierr=ierr)
   write(packages,'(a)') 'mp_thompson_in'
   call MPAS_stream_mgr_add_field(manager, 'restart', 'mu_c', packages=packages, ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'tend_sfc_pressure', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rt_diabatic_tend', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'nsteps_accum', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ndays_accum', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'tlag', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'tday_accum', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'tyear_mean', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'tyear_accum', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'refl10cm_max', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_rainnc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rainncv', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rainnc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'snownc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'graupelnc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sr', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_rainc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cuprec', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rainc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'raincv', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'nca', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cubot', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cutop', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'w0avg', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'qcg', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sh3d', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'qke', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'qke_adv', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cov', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'qsq', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'tsq', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'tke_pbl', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'wstar', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'delta', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'el_pbl', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ch', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'kpbl', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'hpbl', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'hfx', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'mavail', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'mol', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'qfx', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'qsfc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ust', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ustm', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'zol', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'znt', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'br', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cd', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cda', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'chs', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'chs2', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cqs2', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ck', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cka', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'cpm', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'flhc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'flqc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'gz1oz0', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'lh', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'psim', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'psih', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'qgh', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'regime', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rmol', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'wspd', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'fh', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'fm', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'u10', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'v10', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'q2', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 't2m', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'th2m', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'dusfcg', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'dvsfcg', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'dtaux3d', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'dtauy3d', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rubldiff', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rvbldiff', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_acswdnb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_acswdnbc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_acswdnt', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_acswdntc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_acswupb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_acswupbc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_acswupt', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_acswuptc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'acswdnb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'acswdnbc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'acswdnt', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'acswdntc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'acswupb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'acswupbc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'acswupt', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'acswuptc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'gsw', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_aclwdnb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_aclwdnbc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_aclwdnt', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_aclwdntc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_aclwupb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_aclwupbc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_aclwupt', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'i_aclwuptc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'aclwdnb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'aclwdnbc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'aclwdnt', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'aclwdntc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'aclwupb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'aclwupbc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'aclwupt', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'aclwuptc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'glw', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'o3clim', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'o3vmr', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'acsnom', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'acsnow', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'canwat', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'chklowq', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'grdflx', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'lai', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'noahres', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'potevp', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sfc_albedo', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sfc_emiss', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sfc_emibck', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sfcrunoff', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'smstav', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'smstot', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'snopcx', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'snotime', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sstsk', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sstsk_dtc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sstsk_dtw', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'thc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'udrunoff', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'xicem', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'z0', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'zs', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'k22_shallow', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'kbcon_shallow', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ktop_shallow', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ktop_deep', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'xmb_total', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'xmb_shallow', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'qc_cu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'qi_cu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rthcuten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rqvcuten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rqccuten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rqicuten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rqrcuten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rqscuten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rqvdynten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rthdynten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rucuten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rvcuten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rublten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rvblten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rthblten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rqvblten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rqcblten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rqiblten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rniblten', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rthratensw', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'rthratenlw', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'isltyp', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ivgtyp', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'mminlu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'isice_lu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'iswater_lu', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'landmask', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'shdmin', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'shdmax', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'snoalb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'albedo12m', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'greenfrac', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sfc_albbck', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'skintemp', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'snow', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'snowc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'snowh', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sst', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'tmn', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'vegfra', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'seaice', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'xice', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'xland', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'dzs', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'smcrel', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'sh2o', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'smois', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'tslb', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'var2d', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'con', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'oa1', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'oa2', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'oa3', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'oa4', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ol1', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ol2', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ol3', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'ol4', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 't_oml', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 't_oml_initial', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 't_oml_200m_initial', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'h_oml', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'h_oml_initial', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'hu_oml', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'restart', 'hv_oml', ierr=ierr)
   call MPAS_stream_mgr_set_property(manager, 'restart', MPAS_STREAM_PROPERTY_IMMUTABLE, .true., ierr=ierr)

   call MPAS_stream_mgr_create_stream(manager, 'iau', MPAS_STREAM_INPUT, 'x1.40962.AmB.$Y-$M-$D_$h.$m.$s.nc', ierr=ierr)
   call MPAS_stream_mgr_add_pool(manager, 'iau', 'tend_iau', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'iau', 'xtime', ierr=ierr)
   call MPAS_stream_mgr_set_property(manager, 'iau', MPAS_STREAM_PROPERTY_IMMUTABLE, .true., ierr=ierr)

   call MPAS_stream_mgr_create_stream(manager, 'lbc_in', MPAS_STREAM_INPUT, 'lbc.$Y-$M-$D_$h.$m.$s.nc', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'lbc_in', 'lbc_scalars', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'lbc_in', 'lbc_u', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'lbc_in', 'lbc_w', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'lbc_in', 'lbc_rho', ierr=ierr)
   call MPAS_stream_mgr_add_field(manager, 'lbc_in', 'lbc_theta', ierr=ierr)
   call MPAS_stream_mgr_set_property(manager, 'lbc_in', MPAS_STREAM_PROPERTY_IMMUTABLE, .true., ierr=ierr)

end function atm_setup_immutable_streams


